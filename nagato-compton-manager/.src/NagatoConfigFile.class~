' Gambas class file

Create Static

Property Read ConfigFilePath As String
Property Read Properties As Collection

Private $configFile As String
Private $properties As New Collection

Private Function getDefaultConfigFile() As String
    
    Return File.Load("data/compton.conf")
    
End

Private Function getBooleanValue(argValue As String) As Boolean
    
    
    
End

Private Sub setProperty(argLine As String)
    
    Dim yukiData As String[] = Split(Replace$(argLine, " ", ""), "=", "", True, False)
    
    If yukiData.Count = 2 Then
        Debug yukiData[0]
        Debug Replace$(yukiData[1], "\t", "")
        $properties.Add(Replace$(yukiData[1], "\t", ""), yukiData[0])
    Else
        Debug "pass"
    End If
    
End

Private Sub readConfigFile()
    
    Dim yukiStream As Stream 
    Dim yukiLine As String
    
    yukiStream = Open Me.ConfigFilePath For Input
    
    While Not Eof(yukiStream)
        Line Input #yukiStream, yukiLine
        setProperty(Replace$(yukiLine, ";", ""))
    Wend
    
    Close #yukiStream
    
End

Public Sub Ensure()
    
    If Not Exist(Me.ConfigFilePath) Then File.Save(Me.ConfigFilePath, getDefaultConfigFile())
    readConfigFile()
    
End

Private Function ConfigFilePath_Read() As String

    Return User.Home &/ ".nagato-compton-manager.conf"

End

Private Function Properties_Read() As Collection

    Return $properties

End
