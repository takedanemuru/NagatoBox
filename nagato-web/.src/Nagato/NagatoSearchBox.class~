' Gambas class file

Inherits NagatoMenuPipe

Private Const TopOffset As Integer = 48
Private Const RightOffset As Integer = 48
Private Const DuckDuckGoApi As String = "http://duckduckgo.com/?q=&1+&2"

Private $drawingArea As DrawingArea
Private $container As Container
Private $searchEngineButton As MenuButton
Private $searchBox As ButtonBox
Private $starButton As MenuButton
Private $api As NagatoDuckDuckGo

Private Sub addSearchBox(argContainer As Container)
    
    $searchBox = New ButtonBox(argContainer) As "SearchBox"
    
    With $searchBox
        .Expand = True
        .Picture = MikuruIcon.Get("search")
        .Border = False
    End With
    
End

Private Sub addStarButton(argContainer As Container)
    
    $starButton = New MenuButton(argContainer)
    
    With $starButton
        .Width = argContainer.H
        .Picture = MikuruIcon.Get("star")
        .Border = False
    End With
    
End

Private Sub initializeSearchbox()
   
    addSearchBox($container)
    addStarButton($container)
    
End

Public Sub _new(argContainer As Container)
    
    $container = argContainer
    initializeSearchbox()
    
End

Public Sub Move(argHeight As Integer, argWidth As Integer)
    
    $container.X = argWidth - ($container.W + RightOffset)
    $container.Y = TopOffset
    
End

Public Sub SearchBox_Activate()
    
    If $searchBox.Text = "" Then Return
    
    Raise MenuEventWithArg(NagatoMenuPipe.SearchApiCall, $api.GetApi($searchBox.Text))
    
End
