' Gambas class file

Inherits NagatoButtonMenu

Private Enum MenuDownloadMovie, MenuDownloadMusic

Private $url As String
Private $downloader As New NagatoYoutubeDL As "TFEI"

Public Function _AbstractOnGetUniqueName() As String
    
    Return "DownloadMenu"
    
End

Public Sub _InitializeCategoryMenus()
    
    Me._AddMenu(("Download As Video"), MenuDownloadMovie, "video")
    Me._AddMenu(("Download As Music"), MenuDownloadMusic, "music")
    
End

Public Sub SetUrl(argUrl As String)
    
    $url = argUrl
    
End

Public Sub MenuItem_Click()
    
    If Not MikuruUrl.IsYouTubeVideo($url) Then
        Return
    Else If Last.Tag = MenuDownloadMovie Then
        $downloader.DownloadAsMovie($url)
    Else If Last.Tag = MenuDownloadMusic Then
        $downloader.DownloadAsMusic($url)
    End If
    
End
