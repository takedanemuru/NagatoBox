' Gambas class file

Inherits NagatoSearchEngines

Private Const TopOffset As Integer = 48
Private Const RightOffset As Integer = 48

Private $container As Container
Private $button As NagatoSearchEngineSelectButton
Private $queryBox As NagatoWebSearchQueryBox
Private $observer As Observer

Public Sub _new(argContainer As Container)
    
    $container = argContainer
    $button = New NagatoSearchEngineSelectButton(argContainer) As "TFEI"
    $queryBox = New NagatoWebSearchQueryBox(argContainer) As "TFEI"
    
    $observer = New Observer($button) As "Asakura"
    
End

Public Sub Move(argHeight As Integer, argWidth As Integer)
    
    $container.X = argWidth - ($container.W + RightOffset)
    $container.Y = TopOffset
    
End

Public Sub TFEI_Signal(argEvent As Integer, argArguments As Variant[])
    
    Select Case argEvent
        Case MikuruSignal.SearchEngineChanged
            $queryBox.SetBang(argArguments[0])
            $button.SetText(argArguments[1])
        Default
            Raise Signal(argEvent, argArguments)
    End Select
    
End

Public Sub Asakura_SizeChanged(argSize As Integer)
    
    $container.W = argSize + TFEI.UX.SearchBoxWidth
    
End
