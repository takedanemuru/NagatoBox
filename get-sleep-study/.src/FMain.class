' Gambas class file

Private $signal As DBusSignal 
Private $signal2 As DBusSignal
Private $timer As New Timer As "Timer"
Private $count As Integer

Public Sub _new()

End

Public Sub Form_Open()

    $signal = New DBusSignal(DBus.System, "org.freedesktop.UPower", True) As "UPowerSignal"
    $signal2 = New DBusSignal(DBus.System, "org.freedesktop.UPower.Wakeups", True) As "UPowerSignal"

    $timer.Enabled = True

    Application.MainWindow = Me

End

Public Sub UPowerSignal_Signal(argSignal As String, Arguments As Variant[])
    
    Debug argSignal
    
    Label1.Text = "a Signal has been caught."
    
End

Public Sub Timer_Timer()
    
    Inc $count
    
    Label2.Text = $count
    
End
