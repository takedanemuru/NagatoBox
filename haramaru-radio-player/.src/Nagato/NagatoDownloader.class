' Gambas class file

Property Read Buffer As String

Private $httpClient As HttpClient
Private $buffer As String

Event Finished

Public Sub _new(argUrl As String)
    
    $buffer = ""
    
    $httpClient = New HttpClient As "HttpClient"

    With $httpClient
        .URL = argUrl
        .Async = True
        .Timeout = 30
        .Get()
    End With
    
End

Public Sub HttpClient_Read()
    
    $buffer &= Read #Last, Lof(Last)
    
End

Public Sub HttpClient_Finished()
    
    Raise Finished
    
End
 
Private Function Buffer_Read() As String

    Return $buffer

End
