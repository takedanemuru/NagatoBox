' Gambas class file

Private $painterText As New NagatoPainterText
Private $painterHeader As New NagatoPainterHeader
Private $painterImage As New NagatoPainterImage2
Private $painterTextOnShade As New NagatoPainterTextOnShade
Private $proxyPlayerX As NagatoDBusAccessNagatoPlayerX

Private $path As String = ""
Private $coverArt As Image

Public Sub _call(argY As Integer) As Integer
    
    Dim yukiY As Integer = argY
    
    If DBus.Session.Applications.Exist("org.gambas.nagato-player-x") Then
        If Not Object.IsValid($proxyPlayerX) Then $proxyPlayerX = New NagatoDBusAccessNagatoPlayerX
        Paint.Font.Size = 11
        yukiY = $painterHeader(yukiY + 4, ("Now Playing"))
        Paint.Font.Size = 9
        yukiY = $painterImage(yukiY + 4, $proxyPlayerX.GetCoverArtPath(), 150)
        yukiY = $painterText(yukiY + 8, $proxyPlayerX.GetText())
        yukiY = $painterText(yukiY + 4, $proxyPlayerX.GetTextProgress())
    End If
    
    Return yukiY + 4
    
End
