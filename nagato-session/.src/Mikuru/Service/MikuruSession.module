' Gambas module file

Private $logind As New NagatoLogind

Private Function getDesktopSession() As String
    
    Dim yukiOutput As String
    
    Shell "printenv | grep DESKTOP_SESSION" To yukiOutput
    
    Return Replace(yukiOutput, "\n", "")
    
End

Public Function IsOpenbox() As Boolean
    
    Dim yukiDesktop As String = getDesktopSession()
    
    If (yukiDesktop Ends "openbox") Or If (yukiDesktop Ends "NagatoBox") Then
        Return True
    Else
        Return False
    Endif
    
End

Public Function IsNagatoBox() As Boolean
    
    Return (getDesktopSession() Ends "NagatoBox") 

End

Public Sub Logout(argType As Integer)
    
    Select Case argType
        Case NagatoMessage.ModeLogout
            Shell Subst$("loginctl kill-user &1", User.Id)
        Case NagatoMessage.ModeReboot
            $logind.Reboot()
        Case NagatoMessage.ModeShutdown
            $logind.PowerOff()
    End Select
    
End
