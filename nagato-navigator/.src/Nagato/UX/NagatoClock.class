' Gambas class file

Private $label As Label
Private $button As MenuButton
Private $observer As Observer

Private Sub addButton(argContainer As Container)
    
    $button = New MenuButton(argContainer) As "NagatoMenu"
    
    With $button
        .AutoResize = False
        .Text = " ClockButtonTest "
        .Border = False
        .Foreground = Color.White
        .Arrow = False
    End With
    
End

Private Sub addLabel(argContainer As Container)
    
    $label = New Label(argContainer) As "NagatoMenu"
    
    With $label
        .AutoResize = False
        .Text = "please wait..."
        .Alignment = Align.Left
        .Foreground = Color.White
    End With
    
End

Public Sub _new(argContainer As Container)
    
    addButton(argContainer)
    'addLabel(argContainer)
    
    $observer = New Observer(NagatoTimer) As "Asakura"
    
End

Public Sub Asakura_Timer()
    
    With $button
        .Text = Format$(Now(), NagatoSettings.ClockFormat)
        .Foreground = NagatoSettings.ForegroundColor
        If .Font.TextWidth(.Text) > .W Then .W = .Font.TextWidth(.Text)
    End With
    
End

Public Sub NagatoMenu_Click()
    
    Shell "nagato-calendar"
    
End
