' Gambas module file

Private Sub ensureNagatoTaskmanagerActivation()
    
    If Not DBus.Session.Applications.Exist("org.gambas.nagato.taskmanager") Then
        Shell Subst$("nagato-taskmanager --register &1", Application.Name) 
    Endif
    
End

' Private Sub ensureNagatoNetworkManagerActivation()
'     
'     If Not DBus.Session.Applications.Exist("org.gambas.nagato.network.manager") Then
'         Shell "nagato-network-manager --non-gui"
'     Endif
'     
' End

Public Sub Main()
    
    If NagatoDBus.IsUnique() Then
        ensureNagatoTaskmanagerActivation()
        NagatoPowerManager.Activate()
        NagatoNetworkManager.Activate()
        NagatoRss.Refresh()
        NagatoDBus.Register()
        HaruhiMain.Show()
    Else
        Message.Info(("YUKI.N > nagato-navigator has been activated."), ("OK"))
    End If
    
End
