' Gambas class file

Property Read Key As String

Private $iconView As IconView
Private $timer As New Timer As "DesktopTimer"

Public Sub _new(argIconView As IconView)
    
    $iconView = argIconView
    $iconView.Add(Me.Key, "")
    $timer.Enabled = True
    
End

Public Sub DesktopTimer_Timer()
    
    Dim yukiImage As New Image(128, 128, Color.Orange + 16777216 * 128)
    
    Paint.Begin(yukiImage)
        Paint.Brush = Paint.Color(Color.White)
        Paint.Font.Size = 16
        Paint.RichText(Format$(Now(), ("hh:nn:ss")), 0, 0, 128, 128, Align.Center)
        Paint.Fill()
    Paint.End()
    
    $iconView["clock"].Picture = yukiImage.Picture 
    
End

Private Function Key_Read() As String

    Return "clock"

End
