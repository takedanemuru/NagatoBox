' Gambas class file

Private $container As HBox
Private $starButton As NagatoMenuDesktopPanelButton
Private $main As NagatoDesktopPanelContainer
Private $pager As NagatoPanelPager
Private $clock As NagatoPanelClock

Private Sub setPanelItems()
    
    $starButton = New NagatoMenuDesktopPanelButton($container) As "StarMenu"
    $main = New NagatoDesktopPanelContainer($container)
    $pager = New NagatoPanelPager($container, False)
    $clock = New NagatoPanelClock($container, False)
    
End

Private Sub initializeContainer(argForm As Form)
    
    $container = New HBox(argForm) As "Container"
    
    With $container
        .Expand = False
        .H = NagatoSettingsPanel.Height
        .Background = NagatoSettingsPanel.Background
    End With
    
End

Public Sub _new(argForm As Form)
    
    initializeContainer(argForm)
    setPanelItems()
    ' HaruhiSystray.Visible = False
    ' HaruhiSystray.Start()
    ' MikuruX11.SetAsDock(HaruhiSystray.Id)
    ' MikuruX11.ReservePanelHeightOnScreen(HaruhiSystray.Id)
    
End

Public Sub StarMenu_ChangeMode(argMode As Integer)
    
    $main.ChangeMode(argMode)
    
End

Public Sub StarMenu_Signal(argEvent As Integer, argValues As Variant[])
    
    $container.Background = NagatoSettingsPanel.Background
    $main.ForceReload()
    $pager.ForceReload()
    $clock.ForceReload()
    
End

Public Sub Container_Arrange()
    
    ' HaruhiSystray.Y = $container.ScreenY
    ' HaruhiSystray.H = $container.H
    ' HaruhiSystray.Visible = True
    
End
