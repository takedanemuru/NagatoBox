' Gambas class file

Inherits NagatoDesktopPanelContent

Private $text As String

Public Sub _new(argContainer As Container, argExpand As Boolean)
    
    Me._Initialize(argContainer, argExpand)
    
End

Public Sub ClockDrawingArea_Draw()

    Paint.Begin(Me._$drawingArea)
        Paint.Brush = Paint.Color(NagatoSettingsPanel.Foreground)
        Paint.Font.Bold = True
        Paint.RichText($text, 0, 0, Me._$drawingArea.W, Me._$drawingArea.H, Align.Center)
        Paint.Fill()
    Paint.End()
    
End

Public Sub ClockDrawingArea_Menu()
    
    Dim yukiMenu As New NagatoContextMenuPanelClock(HaruhiDesktop, "")
    
    yukiMenu.Popup()
    
End

Public Sub _Refresh()
    
    $text = Format$(Now(), NagatoSettingsPanel.ClockFormat)
    Me._$drawingArea.W = Max(Me._$drawingArea.W, HaruhiMain.Font.RichTextWidth($text) + 16)
    
    Me._$drawingArea.Refresh()
    
End
