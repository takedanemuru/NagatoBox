' Gambas class file

Inherits NagatoSignalWidget

Private $hBox As HBox
Private $button As Button
Private $player As New MediaPlayer
Private $path As String

Private Sub initializeContainer()
    
    $hBox = New HBox(Me._$container)
    
    With $hBox
        .H = 36
        .Expand = False
        .Visible = False
    End With
    
End

Private Sub initializeButton()
    
    $button = New Button($hBox) As "Button"
    
    With $button
        .Text = "testing"
        .Expand = True
    End With
    
End

Public Sub Set(argPath As String)
    
    Try $player.Stop()

    $button.Text = ("Play")
    $button.Picture = MikuruIcon.Get("button-play")

    If DesktopMime.FromFile(argPath).Type Begins "audio" Then
        $path = argPath
        $hBox.Visible = True
    Else
        $hBox.Visible = False
    Endif
        
End

Public Sub _InitializeWidgets()
    
    initializeContainer()
    initializeButton()
    
End

Public Sub Button_Click()
    
    Try $player.Stop()
    $player.URL = Media.URL($path)
    $player.Play
    
End
