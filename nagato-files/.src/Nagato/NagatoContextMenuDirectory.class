' Gambas class file

Inherits NagatoContextMenu

Public Sub _AddChildMenus()
    
    With NagatoMenuPipe
        Me._AddContextMenu(("Open"), .DirOpen, MikuruIcon.Get("outbox"))
        Me._AddContextMenu(("Open in new tab"), .DirOpenInNewTab)
        Me._AddContextMenu(("Copy path"), .PathCopyToClipboard, MikuruIcon.Get("clipboard"))
        Me._AddContextMenu("", .MenuNone) ' As Spacer
        If Not NagatoXdg.IsUserDir(Me._$path) Then
            Me._AddContextMenu(("Rename"), .DirRename)
        End If
        Me._AddContextMenu(("Directory Size"), .DirComputeSize, MikuruIcon.Get("calculator"))
        Me._AddContextMenu(("Tagging"), .TagAdd, MikuruIcon.Get("tag"))
        Me._AddContextMenu(("Remove Tag"), .TagRemove, MikuruIcon.Get("tag"))
        If Not NagatoXdg.IsUserDir(Me._$path) Then
            Me._AddContextMenu("", .MenuNone) ' As Spacer
            Me._AddContextMenu(("Delete"), .DirDelete, MikuruIcon.Get("bin"))
        End If
    End With
    
End

Public Sub ContextMenu_Click()
    
    If Last.Tag = NagatoMenuPipe.DirComputeSize Then
        MikuruDirectorySize.Compute(Me._$path)
    Else
        Me._ClickAction()
    Endif
    
End