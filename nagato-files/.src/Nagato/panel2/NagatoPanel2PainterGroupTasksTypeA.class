' Gambas class file

Private $drawingArea As DrawingArea

Private $painterClock As NagatoPanel2PainterClock
Private $painterPager As NagatoPanel2PainterPager
Private $painterTasks As NagatoPanel2PainterTasksTypeAlpha

Private $mouseClickDispatcher As NagatoPanel2MouseClickDispatcher
Private $starMenu As New NagatoContextMenuDesktopPanelStar

Public Sub _call()
    
    $mouseClickDispatcher.PointClock = $painterClock.Paint(0)
    $mouseClickDispatcher.PointPager = $painterPager.Paint($mouseClickDispatcher.PointClock)
    $mouseClickDispatcher.PointMain = $painterTasks.Paint($mouseClickDispatcher.PointPager)
    
End

Public Sub _new(argDrawingArea As DrawingArea)
    
    $drawingArea = argDrawingArea
    $mouseClickDispatcher = New NagatoPanel2MouseClickDispatcher($drawingArea) As "Mouse"
    $painterClock = New NagatoPanel2PainterClock($drawingArea)
    $painterPager = New NagatoPanel2PainterPager($drawingArea)
    $painterTasks = New NagatoPanel2PainterTasksTypeAlpha($drawingArea)

End

Public Sub Mouse_Clicked(argType As Integer, argLeft As Boolean)
    
    Select Case argType
        Case NagatoPanel2MouseClickDispatcher.ClickStar
            If argLeft And If HaruhiPersona.Closed Then HaruhiPersona.Fortune()
            If Not argLeft Then $starMenu.PopUp()
        Case NagatoPanel2MouseClickDispatcher.ClickMain
            $painterTasks.Click(Mouse.X, argLeft)
        Case NagatoPanel2MouseClickDispatcher.ClickPager
            $painterPager.Click(Mouse.X, argLeft)
        Case NagatoPanel2MouseClickDispatcher.ClickClock
            $painterClock.Click(Mouse.X, argLeft)
    End Select
    
End
