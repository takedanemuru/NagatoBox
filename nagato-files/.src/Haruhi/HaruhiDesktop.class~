' Gambas class file

Private Const Type As String = "_NET_WM_WINDOW_TYPE"
Private Const TypeDesktop As String = "_NET_WM_WINDOW_TYPE_DESKTOP"

Private $desktop As NagatoDesktop
Private $panel As Panel

Private Sub initializeForm()
    
    With Me
        .X = 0
        .Y = 0
        .W = Screen.W
        .H = Screen.H
    End With
    
End

Private Sub initializePanel()
    
    $panel = New Panel(Me)
    
    $panel.Expand = False
    $panel.H = (Screen.H - Desktop.H)
    
End

Public Sub Form_Open()

    Application.MainWindow = Me
    initializeForm()
    $desktop = New NagatoDesktop(Me)
    initializePanel()

    Try Shell Subst("xprop -id &1 -f &2 32a -set &2 &3 && openbox --restart", Me.Id, Type, TypeDesktop)

    If Not Error Then NagatoDBus.Register()

End
