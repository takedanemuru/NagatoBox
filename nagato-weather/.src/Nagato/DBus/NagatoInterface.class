' Gambas class file

Create Static

Inherits DBusObject

Private Const IconDIrectory As String = "/usr/share/icons/nagato-weather/weather_icons"

Private $conditions As New NagatoWeatherCondition

Property Read WeatherElement As NagatoWeatherElement
Property Read Ready As Boolean
Property Read Temperature As Float
Property Read IconId As Integer
Property Read IconPath As String
Property Read Condition As String
Property Read BackgroundColor As Integer
Property Read Location As String
Property Read WindSpeed As Float
Property Read WindDirection As String
Property Read Humidity As Float
Property Read Cloudiness As Float
Property Read Precipitation As Float

Public Sub Reload()
    
    Try NagatoWeatherCache.Reload()
    
End

Private Function Ready_Read() As Boolean

    Return NagatoWeatherCache.IsReady

End

Private Function Temperature_Read() As Float

    Return Me.WeatherElement[MikuruWeatherKey.Temperature]

End

Private Function IconId_Read() As Integer

    Return Me.WeatherElement[MikuruWeatherKey.IconId]

End

Private Function Condition_Read() As String

    Return $conditions[Me.WeatherElement[MikuruWeatherKey.IconId]]

End

Private Function WeatherElement_Read() As NagatoWeatherElement

    Return NagatoWeatherCache.GetWeatherElementMostRecent()

End

Private Function BackgroundColor_Read() As Integer

    Return MikuruWeatherColor(Me.WeatherElement[MikuruWeatherKey.IconId], True)

End

Private Function IconPath_Read() As String

    Return MikuruWeatherIcon.GetPath(True, Me.IconId)

End

Private Function Location_Read() As String

    Return NagatoSettingsLocation.UserLocationName

End

Private Function WindSpeed_Read() As Float

    Return Me.WeatherElement[MikuruWeatherKey.WindSpeed]

End

Private Function WindDirection_Read() As String

    Return Me.WeatherElement[MikuruWeatherKey.WindDirection]

End

Private Function Humidity_Read() As Float

    Return Me.WeatherElement[MikuruWeatherKey.Humidity]

End

Private Function Cloudiness_Read() As Float

    Return Me.WeatherElement[MikuruWeatherKey.Cloudiness]

End

Private Function Precipitation_Read() As Float

    Return Me.WeatherElement[MikuruWeatherKey.Precipitation]

End
