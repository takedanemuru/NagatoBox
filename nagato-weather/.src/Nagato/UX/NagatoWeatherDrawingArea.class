' Gambas class file

Inherits NagatoWidget

Private $drawingArea As DrawingArea
Private $painterCurrentWeather As NagatoWeatherPainterCurrentWeather
Private $painterPleaseWait As NagatoWeatherPainterPleaseWait

Public Sub Refresh()
    
    $drawingArea.Refresh()
    
End

Public Sub _new(argContainer As Container)
    
    $drawingArea = New DrawingArea(argContainer) As "MainDrawingArea"
    $drawingArea.Expand = True

    $painterPleaseWait = New NagatoWeatherPainterPleaseWait($drawingArea)
    $painterCurrentWeather = New NagatoWeatherPainterCurrentWeather($drawingArea)
    
End

Public Sub MainDrawingArea_Draw()
    
    Dim yukiBackground As Integer
    
     If NagatoWeatherCache.IsReady
        yukiBackground = $painterCurrentWeather()
    Else
        yukiBackground = $painterPleaseWait()
    End If

    Raise Signal(MikuruSignal.ViewChangeBackground, [yukiBackground])
    
End

Public Sub MainDrawingArea_Enter()

    Raise Signal(MikuruSignal.ViewChangeStarButtonVisible, [True])

End

Public Sub MainDrawingArea_Leave()

    Raise Signal(MikuruSignal.ViewChangeStarButtonVisible, [False])

End
