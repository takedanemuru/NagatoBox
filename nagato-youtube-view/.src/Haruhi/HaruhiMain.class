' Gambas class file

Private $downloader As New NagatoYoutubeDL As "Downloader"
Private $webView As NagatoWebView
Private $toolBar As NagatoToolBar

Public Sub _new()
    
    $webView = New NagatoWebView(VBox1) As "WebView"
    $toolBar = New NagatoToolBar(VBox1) As "ToolBar"
    
End

Public Sub ToolBar_Signal(argSignal As Integer, argValues As Variant[])
    
    Select Case argSignal
        Case MikuruSignal.UserRequestPlayWithSMPlayer
            Try Exec ["smplayer", $webView.Url]
        Case MikuruSignal.UserRequestDownloadAsMusic
            $downloader.DownloadAsMusic($webView.Url)
        Case MikuruSignal.UserRequestDownloadAsVideo
            $downloader.DownloadAsMovie($webView.Url)
    End Select
    
End

Public Sub WebView_Signal(argSignal As Integer, argValues As Variant[])
    
    $toolBar(argSignal, argValues)
    
End

Public Sub Downloader_Signal(argSignal As Integer, argValues As Variant[])
    
    $toolBar(argSignal, argValues)
    
End
