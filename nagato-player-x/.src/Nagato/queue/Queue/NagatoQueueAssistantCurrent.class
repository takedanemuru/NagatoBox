' Gambas class file

Inherits NagatoQueueAssistant

Property Read CoverArt As Picture
Property Read Titile As String
Property Read Artist As String
Property Read Album As String
Property Read Url As String

Private $coverArt As Picture
Private $observer As Observer
Private $id3TagInfo As NagatoId3TagInfo

Public Sub Reload()
    
    $id3TagInfo = MikuruId3TagInfo(Me._$musicList.Path)
    $coverArt = MikuruEyeD3.GetPicture(Me._$musicList.Path, MikuruUx.CoverArt.Size)
    
End

Public Sub _OptionalOnInitialize()
    
    $observer = New Observer(Me._$player) As "Asakura"
    Me.Reload()
    
End

Private Function CoverArt_Read() As Picture

    Return $coverArt

End

Private Function Titile_Read() As String

    Return $id3TagInfo.Title

End

Private Function Artist_Read() As String

    Return $id3TagInfo.Artist
    
End

Private Function Album_Read() As String

    Return $id3TagInfo.Album

End

Public Sub Asakura_FetchDuration(argDuration As Float)
    
    NagatoDBMedia.FetchDuration(Me._$musicList.Path, argDuration) 
    
End

Private Function Url_Read() As String

    Return Media.URL(Me._$musicList.Path)

End
