' Gambas class file

Inherits NagatoQueueAssistant

Private $observer As Observer

Public Sub EditByIndexes(argIndexes As Integer[])
    
    With MikuruDialogPortalTagEdit
        If argIndexes.Count = 1 Then .SetTag(Me._$musicList[argIndexes[0]].Path)
        If argIndexes.Count > 0 Then .SetTagBulk(Me._$musicList.ChannelQueue.GetPathsByIndexes(argIndexes))
    End With
    
End

Public Sub Refresh(argTitle As String, argArtist As String, argAlbum As String)
    
    Me._$musicList.ChannelTags.Set(argTitle, argArtist, argAlbum)
    NagatoBroadCast(NagatoBroadCast.SignalTagChanged)
    
End

Public Function Get(argTagType As Integer) As String
    
    Return Me._$musicList.ChannelTags.Get(argTagType)
    
End

Public Sub _OptionalOnInitialize()
    
    $observer = New Observer(Me._$player) As "Asakura"
    
End

Public Sub Asakura_FetchDuration(argDuration As Float)
    
    NagatoDBMedia.FetchDuration(Me._$musicList.ChannelCurrent.Path, argDuration) 
    
End

Public Sub Asakura_FetchTags(argTagList As MediaTagList)
    
    If Not NagatoDBMedia.FetchTags(Me._$musicList.ChannelCurrent.Path, argTagList) Then Return

    Me._$musicList.ChannelTags.Set(argTagList["title"], argTagList["artist"], argTagList["album"])
    NagatoBroadCast(NagatoBroadCast.SignalTagChanged)
    
End
